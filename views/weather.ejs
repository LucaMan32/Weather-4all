<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Meteo della città di <%= city %>, Weather of <%= city %>">
    <meta name="author" content="Luca Manfrin, 02094A, Università degli Studi di Milano">
    <meta name="keywords" content="Meteo, Città, Previsioni, Clima, Tempo, Temperatura, Precipitazioni, <%= city %>, <%= description %>, Weather, City, Rainfall, Temperature, Forecast">
    <link href="/meta/schema.json" type="application/ld+json" rel="alternate">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css'>
    <title>Weather-4all: <%= city %></title>
    <link rel="stylesheet" href="/css/meteo.css">
    <link rel="icon" type="image/x-icon" href="img/icon_w.png">
  </head>
  <body style="background: url('<%= unsplash %>');background-repeat: no-repeat;background-size: cover;">
    <div class="card" id="card"> <!-- creazione del div card -->
      <div class="search">  <!-- creazione del div per la ricerca -->
        <form action="/weather" method="POST" id="req1">
          <input type="text" class="search-bar" id="search-bar" name="city" placeholder="Search" required>
          <button type="submit" id="search" name="search" form="req1"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1.5em" 
              width="1.5em" xmlns="http://www.w3.org/2000/svg">
            <path 
              d="M505.04 442.66l-99.71-99.69c-4.5-4.5-10.6-7-17-7h-16.3c27.6-35.3 44-79.69 44-127.99C416.03 93.09 322.92 0 208.02 0S0 93.09 0 207.98s93.11 207.98 208.02 207.98c48.3 0 92.71-16.4 128.01-44v16.3c0 6.4 2.5 12.5 7 17l99.71 99.69c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.59.1-33.99zm-297.02-90.7c-79.54 0-144-64.34-144-143.98 0-79.53 64.35-143.98 144-143.98 79.54 0 144 64.34 144 143.98 0 79.53-64.35 143.98-144 143.98zm.02-239.96c-40.78 0-73.84 33.05-73.84 73.83 0 32.96 48.26 93.05 66.75 114.86a9.24 9.24 0 0 0 14.18 0c18.49-21.81 66.75-81.89 66.75-114.86 0-40.78-33.06-73.83-73.84-73.83zm0 96c-13.26 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z">
            </path>
          </svg></button>  <!-- creazione del bottone e scelta della lente di ingrandimento tramite l'estensione React icons -->
        </form>
      </div>
      <div class="switch-container">
       <input type="checkbox" id="switch" />
       <label for="switch">
         <i class="fas fa-moon"></i>
         <i class="fas fa-sun"></i>
         <span class="ball"></span> 
       </label>
      </div>
      <div class="weather">  <!-- creazione div relativo al meteo con div per ogni campo -->
        <% if(city !== null) { %>
          <h2 class="city">Weather in <%= city %></h2>
        <% } %>
        <% if(temp !== null) { %>
          <h1 class="temp"><%= temp %> °</h1>
        <% } %>
        <div class="flex">
          <% if(imgsrc !== null) { %>
            <img src="<%= imgsrc %>" alt="icona meteo" class="icon" loadin="lazy">
          <% } %>
          <% if(description !== null) { %>
            <div class="description"><%= description %></div>
          <% } %>
        </div>
        <% if(humidity !== null) { %>
          <div class="humidity">Humidity: <%= humidity %> %</div>
        <% } %>
        <% if(wind !== null) { %>
          <div class="wind">Wind speed: <%= wind %> km/h</div>
        <% } %>
        <% if(aq !== null) { %>
          <div class="aq">Air quality: <%= aq %></div>
        <% } %>
        <% if(sunrise !== null) { %>
          <div class="sunrise">Sunrise: <%= sunrise %></div>
        <% } %>
        <% if(sunset !== null) { %>
          <div class="sunset">Sunset: <%= sunset %></div>
        <% } %>
      </div>
      <hr>  <!-- linea orizzontale per dividere -->
      <% if (min !== null && max !== null && imgtoday !== null) { %>
        <div class="days">
          <div class="flex">
            <div>Today:&nbsp;</div>
            <img src="<%= imgtoday %>" class="icon" loading="lazy" alt="icona meteo">
            <div><%= min %>° / <%= max %>°</div>
          </div>
          <div class="flex">
            <div><%= day1 %>:&nbsp;</div>
            <img src="<%= imgtom %>" class="icon" loading="lazy" alt="icona meteo">
            <div><%= mintom %>° / <%= maxtom %>°</div>
          </div>
          <div class="flex">
            <div><%= day2 %>:&nbsp;</div>
            <img src="<%= imgdayafter %>" class="icon" loading="lazy" alt="icona meteo">
            <div><%= mindayafter %>° / <%= maxdayafter %>°</div>
          </div>
          <div class="flex">
            <div><%= day3 %>:&nbsp;</div>
            <img src="<%= imgday3 %>" class="icon" loading="lazy" alt="icona meteo">
            <div><%= min3 %>° / <%= max3 %>°</div>
          </div>
          <div class="flex">
            <div><%= day4 %>:&nbsp;</div>
            <img src="<%= imgday4 %>" class="icon" loading="lazy" alt="icona meteo">
            <div><%= min4 %>° / <%= max4 %>°</div>
          </div>
          <div class="flex">
            <div><%= day5 %>:&nbsp;</div>
            <img src="<%= imgday5 %>" class="icon" loading="lazy" alt="icona meteo">
            <div><%= min5 %>° / <%= max5 %>°</div>
          </div>
        </div>
      <% } %>
      <p id="footer">Luca Manfrin, 02094A, Università degli Studi di Milano, 2022 &copy;</p>
    </div>
    <script src="/js/darkMode.js"></script>
    <script src="/js/saveChoice.js"></script>
  </body>
</html>
